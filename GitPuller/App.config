<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <startup> 
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.7.2" />
    </startup>
    
    <!-- Performance optimizations -->
    <runtime>
        <!-- Enable concurrent garbage collection for better performance -->
        <gcConcurrent enabled="true" />
        <!-- Enable server GC for multi-core performance -->
        <gcServer enabled="true" />
        
        <!-- Assembly binding redirects for consistent versions -->
        <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
            <dependentAssembly>
                <assemblyIdentity name="System.Memory" publicKeyToken="cc7b13ffcd2ddd51" culture="neutral" />
                <bindingRedirect oldVersion="0.0.0.0-4.0.1.2" newVersion="4.0.1.2" />
            </dependentAssembly>
            <dependentAssembly>
                <assemblyIdentity name="System.Buffers" publicKeyToken="cc7b13ffcd2ddd51" culture="neutral" />
                <bindingRedirect oldVersion="0.0.0.0-4.0.3.0" newVersion="4.0.3.0" />
            </dependentAssembly>
            <dependentAssembly>
                <assemblyIdentity name="Microsoft.Extensions.Configuration.Abstractions" publicKeyToken="adb9793829ddae60" culture="neutral" />
                <bindingRedirect oldVersion="0.0.0.0-8.0.0.0" newVersion="8.0.0.0" />
            </dependentAssembly>
            <dependentAssembly>
                <assemblyIdentity name="Microsoft.Extensions.Primitives" publicKeyToken="adb9793829ddae60" culture="neutral" />
                <bindingRedirect oldVersion="0.0.0.0-8.0.0.0" newVersion="8.0.0.0" />
            </dependentAssembly>
        </assemblyBinding>
        
        <!-- Optimize JIT compilation -->
        <generatePublisherEvidence enabled="false" />
        <legacyCorruptedStateExceptionsPolicy enabled="false" />
    </runtime>
    
    <!-- Network performance optimizations -->
    <system.net>
        <connectionManagement>
            <add address="*" maxconnection="10" />
        </connectionManagement>
        <settings>
            <!-- Enable HTTP connection pooling -->
            <httpWebRequest useUnsafeHeaderParsing="false" />
            <!-- Increase default connection limit -->
            <servicePointManager expect100Continue="false" useNagleAlgorithm="false" />
        </settings>
    </system.net>
    
    <!-- Application settings for performance -->
    <appSettings>
        <!-- Optimize background thread pool -->
        <add key="ThreadPool.SetMinThreads.workerThreads" value="4" />
        <add key="ThreadPool.SetMinThreads.completionPortThreads" value="4" />
    </appSettings>
</configuration>